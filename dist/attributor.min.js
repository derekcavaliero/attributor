/*! 
 * attributor v1.0.0
 * 
 * 
 * Copyright (c) 2018 Derek Cavaliero @ WebMechanix
 * 
 * Date: 2019-03-05 08:11:01 EST 
 */
function Attributor(a,b){JSON.parse&&JSON.stringify&&(this.cookieDomain=a||window.location.hostname,this.fieldMap=b||{first:{source:"source_first",medium:"medium_first",campaign:"campaign_first",term:"term_first",content:"content_first",lp:"lp_first",date:"date_first"},last:{source:"source_last",medium:"medium_last",campaign:"campaign_last",term:"term_last",content:"content_last",lp:"lp_last",date:"date_last"}},this.referrer=this.objectifyUrl(document.referrer),this.params=this.getUrlParams(),this.updateAttrCookies(),this.fillFormFields())}Attributor.prototype={objectifyUrl:function(a){var b=document.createElement("a");return b.href=a,{hostname:b.hostname,href:b.href,params:this.getUrlParams(b.href)}},formatDate:function(){var a=new Date,b=a.getDate(),c=a.getMonth()+1;c=c<10?"0"+c:c;var d=a.getFullYear();return d+"-"+c+"-"+b},fillFormFields:function(){var a={first:this.getCookie("attr_first"),last:this.getCookie("attr_last")};for(var b in this.fieldMap)if(this.fieldMap.hasOwnProperty(b))for(var c in this.fieldMap[b])if(this.fieldMap[b].hasOwnProperty(c)){var d=document.getElementsByName(this.fieldMap[b][c]);if(d)for(var e=0;e<d.length;e++)d[e].value=a[b][c]}},updateAttrCookies:function(){var a={source:"(direct)",medium:"(none)",campaign:"(not set)",term:"(not provided)",content:"(not set)",lp:window.location.hostname+window.location.pathname,date:this.formatDate(),timestamp:Date.now()},b={organic:["www.google.com","www.bing.com","www.yahoo.com","www.ask.com","search.aol.com","www.baidu.com","www.wolframalpha.com","duckduckgo.com","www.yandex.com"],social:["www.linkedin.com","www.facebook.com","t.co","l.instagram.com"]};if(document.referrer&&this.referrer.hostname.indexOf(this.cookieDomain)===-1){var c=!1,d=!1;for(var e in b){if(c)break;if(b.hasOwnProperty(e))for(var f=0;f<b[e].length;f++)if(this.referrer.hostname.indexOf(b[e][f])>-1){var g=b[e][f].split(".");c=2==g.length?g[0]:g[1],d=e;break}}a.source=c?c:this.referrer.hostname,a.medium=d?d:"referral"}for(var h=["source","medium","campaign","term","content"],i=!(!this.params.utm_source&&!this.params.utm_medium),f=0;f<h.length;f++)this.params["utm_"+h[f]]&&(a[h[f]]=this.params["utm_"+h[f]]);if(this.params.utm_source||this.params.utm_medium||((this.params.gclid||this.params.fbclid)&&(a.medium="cpc",i=!0),this.params.gclid&&(a.source="google"),this.params.fbclid&&(a.source="facebook")),this.checkCookie("attr_first")){var j=!!this.checkCookie("attr_last")&&this.getCookie("attr_last");!j||i?this.setCookie("attr_last",a,30):this.setCookie("attr_last",j,30)}else this.setCookie("attr_first",a,730,"days"),this.setCookie("attr_last",a,30)},checkCookie:function(a){return a=this.getCookie(a),null!=a&&""!=a},getCookie:function(a){if(document.cookie.length>0){var b=document.cookie.indexOf(a+"=");if(b!=-1){b=b+a.length+1;var c=document.cookie.indexOf(";",b);return c==-1&&(c=document.cookie.length),JSON.parse(decodeURIComponent(document.cookie.substring(b,c)))}}return""},setCookie:function(a,b,c,d){d="undefined"!=typeof d?d:"minutes";var e=new Date;"days"==d&&e.setDate(e.getDate()+c),"minutes"==d&&e.setTime(e.getTime()+60*c*1e3),document.cookie=a+"="+encodeURIComponent(JSON.stringify(b))+(null==c?"":"; domain=."+this.cookieDomain+"; expires="+e.toUTCString())+"; path=/"},getUrlParams:function(a){var b={},c=document.createElement("a");if(c.href=a||window.location.href,!c.search)return!1;for(var d=c.search.substring(1),e=d.split("&"),f=0;f<e.length;f++){var g=e[f].split("=");b[g[0]]=decodeURIComponent(g[1])}return b}};var __utmz=new Attributor("alexa.com");